# Macroeconomic Forecasting with FMMDE
Reproducibility Package for Macroeconomic Forecasting using Factor Models with Martingale Difference Errors

## Package Information
- **Date Assembled**: April 23, 2025
- **Author(s)**: Luca Mattia Rolla, Alessandro Giovannelli
- **Contact**: Luca Mattia Rolla (lmrolla92@gmail.com, University of Rome “Tor Vergata”, Italy), Alessandro Giovannelli (alessandro.giovannelli@univaq.it, University of L'Aquila, Italy)
- **Repository URL**: https://github.com/lmrolls/FMMDE_2025

## Overview
This repository contains the code and documentation to reproduce the results in "Macroeconomic Forecasting using Factor Models with Martingale Difference Errors" by Luca Mattia Rolla and Alessandro Giovannelli, submitted to *International Journal of Forecasting*. The package reproduces the paper's tables (1–5) and figures.

## Repository Structure
- `code/`: MATLAB scripts and functions.
  - `codeForSimulations/`: Scripts for simulations.
    - `DGPs/`: Data-generating process functions.
      - `fLeeShao.m`: Linear DGP.
      - `fLeeShaoNonLinear.m`: Nonlinear DGP.
    - `factorEstimation/`: Factor estimation methods.
      - `factorLAM.m`, `factorMDDM.m`, `factorMDDM4.m`, `fixedFactorLAM.m`, `fixedFactorsMDDM.m`, `MDDM.m`, `seqTest.m`, `stockwatson2002.m`: Functions for factor estimation and testing.
    - `Table4/`: Scripts for Table 4.
      - `MainFile_TAB4.m`: Main script.
      - `Tab4.xlsx`: Output file.
      - `subfunctions/standardize.m`: Helper function.
    - `Table5/`: Scripts for Table 5.
      - `MainFile_TAB5.m`: Main script.
      - `Table5_MSFE_Ratios.xlsx`: Output file.
      - `subfunctions/standardize.m`: Helper function.
    - `Tables123/`: Scripts for Tables 1–3.
      - **Description**: Contains scripts to generate Tables 1–3 via Monte Carlo simulations evaluating factor model estimation accuracy under varying parameters (true number of factors, data-generating process, signal-to-noise ratio, and sample sizes). The main script conducts simulations with nested loops over sample sizes (n=50, T=50 or T=100), true number of factors (r=2 to 5), DGPs (1 to 3), signal-to-noise parameters (theta: 0.5*r, r, 3*r, 5*r), and 1000 Monte Carlo replications using `SimulFun.m`. It employs Sequential Testing and Eigenvalue Ratio methods, with parameters like MDDM (k0=1) and p-value (0.05). Results include empirical probabilities displayed in the console (matching LaTeX table format) and exported to Excel.
      - `MainFile_TAB123.m`: Main script for Monte Carlo simulations.
      - `format.xlsx`, `Simulation_Results.xlsx`: Output files containing simulation results for both sample sizes (n=50, T=50 and n=50, T=100).
      - `subfunctions/factorSim.m`, `SimulFun.m`, `standardize.m`: Helper functions for simulations and data standardization.
  - `plotsLuca/`: Scripts and data for figures.
    - `nfactors.mat`, `nfactorsBAI.mat`, `nfactorsEIG.mat`: Data for factor plots.
    - `plots.m`: Script to generate figures.
- `README.md`: This file.
- `LICENSE`: MIT License.

## Computing Environment
- **Software**: MATLAB R2023b or later
- **Toolboxes**:
  - Statistics and Machine Learning Toolbox (12.4)
  - Linear Algebra (MATLAB core)
- **License**: MIT License (see `LICENSE`)
- **Hardware**: Tested on a desktop computer with the following specifications:
  - **CPU**: Intel Core i7-9700 (8 cores, 8 threads, 3.00 GHz base, up to 4.70 GHz turbo)
  - **RAM**: 16 GB DDR4-2666
  - **Storage**: 512 GB SSD
  - **Operating System**: Windows 10
- **Expected Runtime**: Approximately 20–40 minutes per table, depending on the specific script and dataset size, and 10–15 minutes for figures, using the Intel i7-9700 system.
- **Setup Instructions**:
  1. Install MATLAB R2023b or later.
  2. Ensure required toolboxes instalado (see above).
  3. Clone this repository: `git clone https://github.com/lmrolls/FMMDE_2025.git` or download as a ZIP.
  4. Open MATLAB and set the working directory to `code/`:
     ```matlab
     cd('path/to/FMMDE_2025/code');
     ```
  5. Add paths manually or create a `startup.m` script (not included) to add all subfolders:
     ```matlab
     addpath(genpath('codeForSimulations'));
     ```

## Data
- **Sharable Data**: Not explicitly included in the provided structure. If datasets (e.g., `.mat` files) are required, they should be placed in a `data/` folder with descriptions.
- **Non-Sharable Data**: If applicable, include access instructions in a `data/external/non_sharable_data.md` file.
- **Intermediary Data**: Outputs like `Tab4.xlsx`, `Table5_MSFE_Ratios.xlsx`, and `Simulation_Results.xlsx` are generated by the scripts and saved in their respective folders.

## Running the Reproducibility Check
- **Computer Used**: Desktop computer with Intel Core i7-9700 (8 cores, 8 threads, 3.00 GHz base, up to 4.70 GHz turbo), 16 GB DDR4-2666 RAM, 512 GB SSD, Windows 10.
- **Expected Runtime**:
  - Tables 1–3: ~20–25 minutes each
  - Table 4: ~20 minutes
  - Table 5: ~25–35 minutes
  - Figures: ~10–15 minutes
- **Special Setup**: None (no GPU required)
- **Instructions**:
  1. Clone the repository: `git clone https://github.com/lmrolls/FMMDE_2025.git`.
  2. Open MATLAB and set the working directory to `code/`:
     ```matlab
     cd('path/to/FMMDE_2025/code');
     ```
  3. Add paths:
     ```matlab
     addpath(genpath('codeForSimulations'));
     ```
  4. Run analysis scripts:
     - For Tables 1–3:
       ```matlab
       run('codeForSimulations/Tables123/MainFile_TAB123.m');
       ```
       Outputs: `codeForSimulations/Tables123/Simulation_Results.xlsx`
     - For Table 4:
       ```matlab
       run('codeForSimulations/Table4/MainFile_TAB4.m');
       ```
       Output: `codeForSimulations/Table4/Tab4.xlsx`
     - For Table 5:
       ```matlab
       run('codeForSimulations/Table5/MainFile_TAB5.m');
       ```
       Output: `codeForSimulations/Table5/Table5_MSFE_Ratios.xlsx`
     - For Figures:
       ```matlab
       run('plotsLuca/plots.m');
       ```
       Outputs: Figures generated from `nfactors.mat`, `nfactorsBAI.mat`, `nfactorsEIG.mat`
  5. Outputs are saved in their respective folders (e.g., `Tables123/`, `Table4/`, `Table5/`).

## Mapping Code to Paper Outputs
- **Tables 1–3**: Generated by `codeForSimulations/Tables123/MainFile_TAB123.m` using functions like `factorSim.m` and `SimulFun.m`. Output: `Simulation_Results.xlsx`.
- **Table 4**: Generated by `codeForSimulations/Table4/MainFile_TAB4.m` using `standardize.m`. Output: `Tab4.xlsx`.
- **Table 5**: Generated by `codeForSimulations/Table5/MainFile_TAB5.m` using `standardize.m`. Output: `Table5_MSFE_Ratios.xlsx`.
- **Figures**: Generated by `plotsLuca/plots.m` using `nfactors.mat`, `nfactorsBAI.mat`, and `nfactorsEIG.mat`.

## Notes
- Ensure MATLAB and required toolboxes are installed.
- If data files are required but not included, contact lmrolla92@gmail.com or alessandro.giovannelli@univaq.it, or follow instructions in `data/external/non_sharable_data.md` (if applicable).
- The `factorEstimation/` folder contains core methods (e.g., `factorMDDM.m`, `seqTest.m`) used in simulations.
- Contact lmrolla92@gmail.com or alessandro.giovannelli@univaq.it for questions or issues.

## License
This package is licensed under the MIT License (see `LICENSE`).

## Acknowledgments
The authors are grateful to Tommaso Proietti for his valuable and insightful comments, which led to several improvements in both the presentation and the content of the paper. The authors are also grateful to the participants of the 41st International Symposium on Forecasting 2022. Alessandro Giovannelli gratefully acknowledges financial support from the Italian Ministry of Education, University and Research, Progetti di Ricerca di Interesse Nazionale, research project 2020-2023, project 2020N9YFFE.